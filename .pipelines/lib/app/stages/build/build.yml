parameters:
- name: APP
  type: object
stages:
- stage: build_${{ parameters.APP.name }}
  displayName: Build pet clinic app  
  jobs:
  - job: build_${{ parameters.APP.name }}
    pool:
      name: $[ variables.${{ parameters.APP.build.pool }}]
    workspace:
      clean: all
    container: default_image
    condition: eq(${{ parameters.APP.build.enabled }}, 'true')
    steps:
    - checkout: self 
      clean: true
      submodules: recursive
      path: $(code_repo_name)
    - template: ../../jobs/build/build.yml
      parameters:
        APP: ${{ parameters.APP }}       